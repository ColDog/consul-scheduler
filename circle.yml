machine:
  services:
    - docker

dependencies:
  pre:
    - go version
    - go get -u github.com/jstemmer/go-junit-report
    - export PATH=$PATH:${pwd}/bin
    - mkdir bin
    - curl https://releases.hashicorp.com/consul/0.6.4/consul_0.6.4_linux_amd64.zip -o consul.zip
    - unzip consul.zip && chmod +x consul && mv consul bin/

test:
  override:
    - go test -v ./... | go-junit-report > $CIRCLE_TEST_REPORTS/golang/junit.xml
